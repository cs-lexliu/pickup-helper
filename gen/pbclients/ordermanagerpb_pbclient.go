// Code generated by pbclient-gen. DO NOT EDIT.
// versions: v0.0.0
// source: gen/pb/OrderManager/OrderManager_grpc.pb.go

package pbclients

import (
	"fmt"

	"google.golang.org/grpc"

	"github.com/cs-lexliu/pickup-helper/gen/pb/OrderManager"
)

// CloseableOrderManagerClient is a closable client for interacting with OrderManager service.
type CloseableOrderManagerClient interface {
	ordermanagerpb.OrderManagerClient
	Close()
}

// closeableOrderManagerClient is a closable client for interacting with OrderManager service.
type closeableOrderManagerClient struct {
	ordermanagerpb.OrderManagerClient
	conn *grpc.ClientConn
}

func (c *closeableOrderManagerClient) Close() {
	if c == nil || c.conn == nil {
		return
	}
	c.conn.Close()
}

func NewcloseableOrderManagerClient(config Config) (*closeableOrderManagerClient, error) {
	conn, err := GetGrpcClientConn(config)
	if err != nil {
		return nil, fmt.Errorf("init grpc conn: %w", err)
	}

	return &closeableOrderManagerClient{
		OrderManagerClient: ordermanagerpb.NewOrderManagerClient(conn),
		conn:               conn,
	}, nil
}
